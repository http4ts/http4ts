<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="http4ts Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="http4ts Blog Atom Feed"><title data-react-helmet="true">Runtime Independence | http4ts</title><meta data-react-helmet="true" property="og:url" content="https://http4ts.github.io/docs/welcome/runtime-independence"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Runtime Independence | http4ts"><meta data-react-helmet="true" name="description" content="Http4ts core functionality does not have any dependencies to node.js packages. All the code in the core of http4ts is written as standard javascript utilities and concepts. Here are some of the examples:"><meta data-react-helmet="true" property="og:description" content="Http4ts core functionality does not have any dependencies to node.js packages. All the code in the core of http4ts is written as standard javascript utilities and concepts. Here are some of the examples:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://http4ts.github.io/docs/welcome/runtime-independence"><link data-react-helmet="true" rel="alternate" href="https://http4ts.github.io/docs/welcome/runtime-independence" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://http4ts.github.io/docs/welcome/runtime-independence" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d1f3216e.css">
<link rel="preload" href="/assets/js/runtime~main.a9641b09.js" as="script">
<link rel="preload" href="/assets/js/main.97c0f557.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/http4ts-logo.png" alt="http4ts Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/http4ts-logo.png" alt="http4ts Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">http4ts</strong></a><a class="navbar__item navbar__link" href="/docs/welcome/getting-started">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/http4ts/http4ts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/http4ts-logo.png" alt="http4ts Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/http4ts-logo.png" alt="http4ts Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">http4ts</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/welcome/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/http4ts/http4ts" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/philosophy">Philosophy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/core-concepts">Core Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/testability">Testability</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/welcome/runtime-independence">Runtime Independence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/symmetry">Symmetry</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/your-first-handler">Your First Handler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/binding-to-node-js-server">Binding To Node.Js Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/request-and-response">Request And Response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/filters">Filters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/async-iterators-instead-of-streams">Async Iterators Instead of Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/unit-tests">Unit Tests</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/http">Http</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/body">Body</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/router">Router</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/node-js">Node.Js</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing/we-need-help">We need your help</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing/project-structure">Project Structure</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Runtime Independence</h1></header><div class="markdown"><p><em>Http4ts</em> core functionality does not have any dependencies to node.js packages. All the code in the core of <em>http4ts</em> is written as standard javascript utilities and concepts. Here are some of the examples:</p><ul><li>Core module doesn&#x27;t use the node.js <code>IncomingMessage</code> or <code>ServerResponse</code> types as request and responses. Instead, it defines runtime-independent request and response types.</li><li>The Node.js streams are not used in <em>http4ts</em>. Instead of streams, we use async iterators which are pure javascript constructs.</li><li>The project does not have any dependencies to any npm module or other package managers. However, we have a couple of <code>devDependencies</code> to facilitate the development of the library.</li></ul><p>This design facilitates testing and enables us to build and distribute <em>http4ts</em> to other environments. Some of the interesting targets can be <a href="https://deno.land/" target="_blank" rel="noopener noreferrer">Deno</a>, serverless environments, or an existing Node.Js server application like <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a>. We are also building a browser-based binding and a simple React component which can help us start the server in the browser and build fully client-side sample applications.</p><p>However, there are some exceptional cases where we need to use some runtime-dependent implementations. For example, we need <code>TextEncoder</code> and <code>TextDecoder</code> classes and, while in standard javascript they should be available via the <code>window</code> object, node.js provides them differently<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>. For these cases, the core library is only dependent on a similar interface and the binding function provides the real classes to the core library via a function called <code>setupEnvironment</code>.</p><p>Note that the current node.js binding (<code>toNodeRequestListener</code> function) calls <code>setupEnvironment</code> automatically. So there is no need to call this function explicitly. This information is only relevant when you want to write a binding.</p><div class="footnotes"><hr><ol><li id="fn-1">We know that node.js v11 added those classes to the global object but we don&#x27;t want to make the node.js binding dependent on any specific version.<a href="#fnref-1" class="footnote-backref">â†©</a></li></ol></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/http4ts/http4ts/edit/master/website/docs/welcome/runtime-independence.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/welcome/testability"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Testability</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/welcome/symmetry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Symmetry Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/welcome/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/welcome/philosophy">Philosophy</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/http4ts/http4ts" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Copyright</h4><ul class="footer__items"><li class="footer__item"><a href="https://fontawesome.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item">This site uses FontAwesome</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a9641b09.js"></script>
<script src="/assets/js/main.97c0f557.js"></script>
</body>
</html>