(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[813],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return u}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=a,f=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7833:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c},default:function(){return p}});var r=n(2122),a=n(9756),i=(n(7294),n(3905)),o={id:"runtime-independence",title:"Runtime Independence",sidebar_label:"Runtime Independence"},s={unversionedId:"welcome/runtime-independence",id:"welcome/runtime-independence",isDocsHomePage:!1,title:"Runtime Independence",description:"Http4ts core functionality does not have any dependencies to node.js packages. All the code in the core of http4ts is written as standard javascript utilities and concepts. Here are some of the examples:",source:"@site/docs/welcome/runtime-independence.md",sourceDirName:"welcome",slug:"/welcome/runtime-independence",permalink:"/docs/welcome/runtime-independence",editUrl:"https://github.com/http4ts/http4ts/edit/master/website/docs/welcome/runtime-independence.md",version:"current",sidebar_label:"Runtime Independence",frontMatter:{id:"runtime-independence",title:"Runtime Independence",sidebar_label:"Runtime Independence"},sidebar:"someSidebar",previous:{title:"Testability",permalink:"/docs/welcome/testability"},next:{title:"Symmetry",permalink:"/docs/welcome/symmetry"}},c=[],l={toc:c};function p(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Http4ts")," core functionality does not have any dependencies to node.js packages. All the code in the core of ",(0,i.kt)("em",{parentName:"p"},"http4ts")," is written as standard javascript utilities and concepts. Here are some of the examples:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Core module doesn't use the node.js ",(0,i.kt)("inlineCode",{parentName:"li"},"IncomingMessage")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"ServerResponse")," types as request and responses. Instead, it defines runtime-independent request and response types."),(0,i.kt)("li",{parentName:"ul"},"The Node.js streams are not used in ",(0,i.kt)("em",{parentName:"li"},"http4ts"),". Instead of streams, we use async iterators which are pure javascript constructs."),(0,i.kt)("li",{parentName:"ul"},"The project does not have any dependencies to any npm module or other package managers. However, we have a couple of ",(0,i.kt)("inlineCode",{parentName:"li"},"devDependencies")," to facilitate the development of the library.")),(0,i.kt)("p",null,"This design facilitates testing and enables us to build and distribute ",(0,i.kt)("em",{parentName:"p"},"http4ts")," to other environments. Some of the interesting targets can be ",(0,i.kt)("a",{parentName:"p",href:"https://deno.land/"},"Deno"),", serverless environments, or an existing Node.Js server application like ",(0,i.kt)("a",{parentName:"p",href:"https://expressjs.com/"},"Express"),". We are also building a browser-based binding and a simple React component which can help us start the server in the browser and build fully client-side sample applications."),(0,i.kt)("p",null,"However, there are some exceptional cases where we need to use some runtime-dependent implementations. For example, we need ",(0,i.kt)("inlineCode",{parentName:"p"},"TextEncoder")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"TextDecoder")," classes and, while in standard javascript they should be available via the ",(0,i.kt)("inlineCode",{parentName:"p"},"window")," object, node.js provides them differently",(0,i.kt)("sup",{parentName:"p",id:"fnref-1"},(0,i.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),". For these cases, the core library is only dependent on a similar interface and the binding function provides the real classes to the core library via a function called ",(0,i.kt)("inlineCode",{parentName:"p"},"setupEnvironment"),"."),(0,i.kt)("p",null,"Note that the current node.js binding (",(0,i.kt)("inlineCode",{parentName:"p"},"toNodeRequestListener")," function) calls ",(0,i.kt)("inlineCode",{parentName:"p"},"setupEnvironment")," automatically. So there is no need to call this function explicitly. This information is only relevant when you want to write a binding."),(0,i.kt)("div",{className:"footnotes"},(0,i.kt)("hr",{parentName:"div"}),(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol",id:"fn-1"},"We know that node.js v11 added those classes to the global object but we don't want to make the node.js binding dependent on any specific version.",(0,i.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}p.isMDXComponent=!0}}]);