(self.webpackChunkhttp4ts_website=self.webpackChunkhttp4ts_website||[]).push([[647],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return c},kt:function(){return h}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(r),h=o,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||a;return r?n.createElement(m,l(l({ref:t},c),{},{components:r})):n.createElement(m,l({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var p=2;p<a;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1391:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return l},metadata:function(){return i},toc:function(){return s},default:function(){return c}});var n=r(2122),o=r(9756),a=(r(7294),r(3905)),l={id:"core-concepts",title:"Core Concepts",sidebar_label:"Core Concepts"},i={unversionedId:"welcome/core-concepts",id:"welcome/core-concepts",isDocsHomePage:!1,title:"Core Concepts",description:"Http4ts consists of only two concepts. You can build everything you need for an http server by composing these two concepts.",source:"@site/docs/welcome/core-concepts.md",sourceDirName:"welcome",slug:"/welcome/core-concepts",permalink:"/docs/welcome/core-concepts",editUrl:"https://github.com/http4ts/http4ts/edit/master/website/docs/welcome/core-concepts.md",version:"current",sidebar_label:"Core Concepts",frontMatter:{id:"core-concepts",title:"Core Concepts",sidebar_label:"Core Concepts"},sidebar:"someSidebar",previous:{title:"Philosophy",permalink:"/docs/welcome/philosophy"},next:{title:"Testability",permalink:"/docs/welcome/testability"}},s=[{value:"HttpHandler",id:"httphandler",children:[]},{value:"HttpFilter",id:"httpfilter",children:[]}],p={toc:s};function c(e){var t=e.components,r=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Http4ts")," consists of only two concepts. You can build everything you need for an http server by composing these two concepts."),(0,a.kt)("h2",{id:"httphandler"},"HttpHandler"),(0,a.kt)("p",null,"A HttpHandler is a function that accepts a request and returns a response:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"type HttpHandler = (req: HttpRequest) => HttpResponse | Promise<HttpResponse>;\n")),(0,a.kt)("p",null,"For example, all of the following examples can be modelled as ",(0,a.kt)("inlineCode",{parentName:"p"},"HttpHandler"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A ",(0,a.kt)("inlineCode",{parentName:"li"},"loginHandler"),": receives the user credentials and responds with the success result and a token or with a rejection result."),(0,a.kt)("li",{parentName:"ul"},"A router: receives the request and based on the url in the request, finds the handler associated with the url pattern of the request, then sends the request to that handler and returns the response returned from that handler."),(0,a.kt)("li",{parentName:"ul"},"A node.js server: receives the request and responds to it based on its defined behavior.")),(0,a.kt)("p",null,"In ",(0,a.kt)("em",{parentName:"p"},"http4ts"),", all of the above examples are just functions with the same signature."),(0,a.kt)("h2",{id:"httpfilter"},"HttpFilter"),(0,a.kt)("p",null,"A HttpFilter is a higher-order function which accepts a ",(0,a.kt)("inlineCode",{parentName:"p"},"HttpHandler")," and returns another ",(0,a.kt)("inlineCode",{parentName:"p"},"HttpHandler"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"type HttpFilter = (handler: HttpHandler) => HttpHandler | Promise<HttpHandler>;\n")),(0,a.kt)("p",null,"HttpFilter is a powerful concept that helps you to add features to already defined ",(0,a.kt)("inlineCode",{parentName:"p"},"HttpHandler"),"s. Here are some examples:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You want to measure the time of your handlers. You can build a filter called ",(0,a.kt)("inlineCode",{parentName:"li"},"measure")," and decorate your ",(0,a.kt)("inlineCode",{parentName:"li"},"HttpHandlers")," with them to measure the time of request processing."),(0,a.kt)("li",{parentName:"ul"},"You want to authenticate some of your routes. You can build a filter to check the request headers and if the request is provided with the token in the header, send it to the handler, otherwise reject the request and respond with ",(0,a.kt)("inlineCode",{parentName:"li"},"UNAUTHORIZED"),"."),(0,a.kt)("li",{parentName:"ul"},"You want to define a global error handler that handles every unhandled exception, log the error and respond with a proper response like ",(0,a.kt)("inlineCode",{parentName:"li"},"INTERNAL_SERVER_ERROR"),". You can build a filter that calls the provided handler in a ",(0,a.kt)("inlineCode",{parentName:"li"},"try")," block and respond with error in ",(0,a.kt)("inlineCode",{parentName:"li"},"catch")," block. Then decorate your server with this error handler filter (because server is a ",(0,a.kt)("inlineCode",{parentName:"li"},"HttpHandler"),"!).")),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Using handlers and filters, you can simply implement reusable building blocks for different use cases. The following illustration visualizes the concept of filters and handlers:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/http4ts/http4ts/master/doc/asset/diagram.png",alt:"Https Data Flows"})))}c.isMDXComponent=!0}}]);